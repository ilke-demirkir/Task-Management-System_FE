<div *ngIf="loading()">Loading comments...</div>
<div *ngIf="error()" class="error">{{ error() }}</div>

<ul *ngIf="!loading() && filteredComments().length">
  <li *ngFor="let comment of filteredComments()">
    <div>
      <strong>User:</strong>
      <ng-container *ngIf="userMap[comment.userId] as user">
        <app-user-avatar [avatarUrl]="user.avatarUrl || 'assets/225-default-avatar.svg'"  [fullName]="user.fullName"></app-user-avatar>
        {{ user.fullName }}
      </ng-container>
      <ng-container *ngIf="!userMap[comment.userId]">{{ comment.userId }}</ng-container>
    </div>
    <div>{{ comment.content }}</div>
    <div><small>{{ comment.createdAt | date:'short' }}</small></div>
    <div>
      <button [appConfirmClick]="{ title: 'Delete Comment', message: 'Are you sure you want to delete this comment?' }" (confirmed)="deleteComment(comment.id)">Delete</button>
    </div>
  </li>
</ul>
<div *ngIf="!loading() && !filteredComments().length">No comments found.</div>
