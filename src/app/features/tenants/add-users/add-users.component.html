<h3 class="mb-3">Add user to tenant</h3>

<mat-form-field appearance="outline" class="w-full">
  <mat-label>Email</mat-label>
  <input
    matInput
    type="email"
    [formControl]="query"
    [matAutocomplete]="auto"
    placeholder="Enter email… (min 2 chars)"
    (keyup.enter)="addSelected()"
  />
</mat-form-field>

<mat-autocomplete
  #auto="matAutocomplete"
  autoActiveFirstOption
  (optionSelected)="onSelectedByEmail($event.option.value)"
>
  <mat-option *ngFor="let u of results()" [value]="u.email">
    {{ u.email }}
  </mat-option>
  <mat-option
    *ngIf="!loading() && (query.value?.length || 0) >= 2 && !results().length"
    disabled
  >
    No users found.
  </mat-option>
</mat-autocomplete>

<div *ngIf="loading()" class="mt-1">Searching…</div>

<div class="mt-2">
  <label>
    Role:
    <select [(ngModel)]="role">
      <option value="User">User</option>
      <option value="Manager">Manager</option>
    </select>
  </label>
</div>

<div class="mt-3 flex gap-2">
  <button class="btn" [disabled]="!selectedUserId" (click)="addSelected()">
    Add
  </button>
  <button (click)="close()" class="btn secondary">Cancel</button>
</div>
