<div *ngIf="error()" class="error">{{ error() }}</div>

<div *ngIf="tenant()">
  <h2>Tenant: {{ tenant()?.name }}</h2>
  <div><strong>ID:</strong> {{ tenant()?.id }}</div>

  <h3>Members</h3>
  <table *ngIf="this.members.length" class="members-table">
    <thead>
      <tr>
        <th>Full Name</th>
        <th>Email</th>
       
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let user of this.members">
        <td>{{ user.fullName }}</td>
        <td>{{ user.email }}</td>
        <td>
          <button *ngIf="authService.isAdmin()" (click)="removeUser(user.userId)">
            Remove
          </button>
        </td>
      </tr>
      <tr *ngIf="authService.isAdmin()">
        
    </tbody>
  </table>
  <div>
    <button mat-raised-button color="primary" (click)="addUsers()">
      Add User to Tenant
    </button>
  </div>
  <div *ngIf="!this.members.length">No members found.</div>

  <h3>Projects</h3>
  <table *ngIf="this.projects.length">
    <thead>
      <tr>
        <th>Name</th>
        <th>Description</th>
        <th>Type</th>
        <th>Owner</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let project of this.projects">
        <td>{{ project.name }}</td>
        <td>{{ project.description }}</td>
        <td>{{ project.projectType }}</td>
        <td>{{ project.ownerName }}</td>
        <td>
          <button [routerLink]="['/projects', project.id]">
            View Details
          </button>
        </td>
        <td *ngIf="authService.isAdmin()">
          <button (click)="deleteProject(project.id)">Delete</button>
        </td>
      </tr>
    </tbody>
  </table>
  <div *ngIf="authService.isAdmin() || authService.isManager()">
    <button mat-raised-button color="primary" [routerLink]="['/projects', 'create']">
      Create Project
    </button>
  </div>
  <div *ngIf="!this.projects">No projects found.</div>
  <div>
    <button mat-raised-button routerLink="/tenants"> Back to Tenants</button>
  </div>
</div>
