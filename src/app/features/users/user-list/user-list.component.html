<app-search-bar
  [placeholder]='"Search users..."'
  (search)="onSearch($event)"
></app-search-bar>

<div *ngIf="error()" class="error">{{ error() }}</div>

<table *ngIf="filteredUsers().length">
  <thead>
    <tr>
      <th>Avatar</th>
      <th>Full Name</th>
      <th>Email</th>
      <th>Job Title</th>
      <th>Active</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let user of filteredUsers()">
      <td>
        <app-user-avatar
          [avatarUrl]='user.avatarUrl || "assets/225-default-avatar.svg"'
          [fullName]="user.fullName"
        ></app-user-avatar>
      </td>
      <td>{{ user.fullName }}</td>
      <td>{{ user.email }}</td>
      <td>{{ user.jobTitle }}</td>
      <td>
        <span [class.active]="user.isActive" [class.inactive]="!user.isActive">
          {{ user.isActive ? "Yes" : "No" }}
        </span>
      </td>
      <td>
        <button [routerLink]='["/users", user.id]'>View Details</button>
      </td>
      <td>
        <button
          [appConfirmClick]='{
            title: "Delete User",
            message: "Are you sure you want to delete this user?",
          }'
          (confirmed)="deleteUser(user.id)"
        >
          Delete
        </button>
      </td>
    </tr>
  </tbody>
</table>

<div *ngIf="!filteredUsers().length">No users found.</div>
